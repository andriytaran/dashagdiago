<% layout('layout_main') -%>
<div id="content" class="content">

  <!-- begin breadcrumb -->
  <ol class="breadcrumb pull-right">
    <li class="breadcrumb-item"><a href="javascript:;">Home</a></li>
    <li class="breadcrumb-item active">Dashboard</li>
  </ol>
  <!-- end breadcrumb -->

  <!-- begin page-header -->
  <h1 class="page-header">New school import page</h1>
  <!-- end page-header -->

  <!-- begin row -->
  <div class="row">

    <!-- begin col-6 -->
    <div class="col-lg-12">

      <!-- begin panel -->
      <div class="panel panel-inverse" id="basicInfo" data-sortable-id="index-7">
        <div class="panel-heading">
          <h4 class="panel-title">New school import</h4>
        </div>
        <div class="panel-body">
        <form id="coreform">
          <div class="form-group row m-b-15">
            <label class="col-form-label col-md-3" for="nameSchool">Name of School</label>
            <div class="col-md-5">
              <input class="form-control m-b-5" type="text" placeholder="Name of School" id="nameSchool" />
            </div>
          </div>

          <div class="form-group row m-b-15">
            <label class="col-form-label col-md-3" for="nameSchool">Short Name of School</label>
            <div class="col-md-5">
              <input class="form-control m-b-5" type="text" placeholder="Short name of School" id="shortNameSchool" />
            </div>
          </div>

          <div class="form-group row m-b-15">
            <label class="col-form-label col-md-3" for="folderName">Folder Name (may be empty for demo)</label>
            <div class="col-md-5">
              <input class="form-control m-b-5" type="text" placeholder="FTP folder Name" id="folderName" />
            </div>
          </div>

          <div class="form-group row m-b-15" style="display: flex;flex-direction: row;align-items: center;">
            <div class="subbtn col-md-5"><input type="button" class="btn btn-lime" id="importSchoolData" value="Import"></div>
          </div>
          <br/>
        </form>
        </div>

      </div>
      <!-- end panel -->

    </div>
    <!-- end col-6 -->

  </div>
  <!-- end row -->
</div>


<script>
  const button = document.getElementById('importSchoolData');
  button.addEventListener('click', function () {
    submit();
  });

  function submit() {
    button.setAttribute('disabled', true);
    const nameSchool = document.getElementById("nameSchool").value;
    const shortNameSchool = document.getElementById("shortNameSchool").value;
    const folderName = document.getElementById("folderName").value;
    createNewSchool({shortNameSchool, nameSchool, folderName}, function () {
      button.setAttribute('disabled', false);
      setTimeout(function(){ window.location.assign(`/?school=${shortNameSchool.toLowerCase()}`) }, 1000);
    })
  }

</script>

<!--<% stylesheet('/../assets/css/common.css') -%>-->
<!--<% stylesheet('/../assets/css/barchart.css') -%>-->
<!--<% stylesheet('/../assets/css/login.css') -%>-->
<!--<% stylesheet('/../assets/css/home.css') -%>-->
<!--<% stylesheet('/../assets/css/table.css') -%>-->
<!--<% script('/../assets/plugins/ejs/ejs.js') -%>-->
<!--<% script('/../assets/js/app/utils.js') -%>-->
<!--<% script('/../assets/js/app/api-mapper.js') -%>-->
<!--<% script('/../assets/js/app/api.js') -%>-->
<!--<% script('/../assets/js/app/domain.js') -%>-->
<!--<% script('/../assets/js/app/components/overall-score-section.js') -%>-->
<!--<% script('/../assets/js/app/components/core-attributes-section.js') -%>-->
<!--<% script('/../assets/js/app/components/academic-attributes-section.js') -%>-->
<!--<% script('/../assets/js/app/components/social-profile-attributes-section.js') -%>-->
<!--<% script('/../assets/js/app/components/emotional-intel-attributes-section.js') -%>-->
<!--<% script('/../assets/js/app/components/athletic-attributes-section.js') -%>-->
<!--<% script('/../assets/js/app/draw/draw-table.js') -%>-->
<!--<% script('/../assets/js/app/draw/draw-overall.js') -%>-->
<!--<% script('/../assets/js/app/draw/draw-bar-chart.js') -%>-->
<!--<% script('/../assets/js/app/draw/draw-top-culturals.js') -%>-->
<!--<% script('/../assets/js/app/draw/draw-pie-chart.js') -%>-->
<!--<% script('/../assets/js/app/home.js') -%>-->
