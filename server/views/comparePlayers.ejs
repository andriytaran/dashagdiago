<%-partial('./partials/basePageHeader')%>

<body>

<%-partial('./partials/sidebarPositions')%>

<div class="wrap" id="mainSection">

  <%-partial('./partials/header')%>

  <section class="s-multiple-player">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h1 class="s-multiple-player__heading main-heading"><span>Multiple</span> Player Dashboard</h1>
        </div>
        <div class="col-md-6">
          <div id="compare-players-info-1">
            <div class="row">
              <div id="compare-players-info-1-score" class="col-md-12"></div>
              <div id="compare-players-info-1-card" class="col-md-12"></div>
              <div id="compare-players-info-1-attr" class="col-md-12"></div>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div id="compare-players-info-2">
            <div class="row">
              <div id="compare-players-info-2-score" class="col-md-12"></div>
              <div id="compare-players-info-2-card" class="col-md-12"></div>
              <div id="compare-players-info-2-attr" class="col-md-12"></div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>
</div>

<script src="/../assets/js/app/api.js"></script>
<script src="../updatedDesign/js/common.js"></script>
<script src="../updatedDesign/constants.js"></script>
<script src="../updatedDesign/comparePlayers.js"></script>
<script>
  $(document).ready(function () {

    updateHeaderLinks();

    // TODO remove hardcode
    const id = 40;

    getSinglePlayerData(id, (res, status) => {

      if (status === 'success') {
        const overallScore = Math.round(res.overallScore.player);
        const player = res.player;

        $("#compare-players-info-1-score").html(AgdiagoScoreHtml(overallScore));
        $("#compare-players-info-1-card").html(CardHtml(player));

        const playerScores = res.scores.player;
        const agdiagoScores = res.scores.agdiago;

        const attr = Object.keys(playerScores);

        $("#compare-players-info-1-attr").html(AttrHtml(attr, id));


        for (let key in playerScores) {
          getPlayerAttributesData(id, key, (data, status2) => {
            if (status2 === 'success') {
              AttrBlock(key, agdiagoScores[key], playerScores[key], data, id);
            }
          });
        }
      }
    })
  });

</script>

</body>

</html>
